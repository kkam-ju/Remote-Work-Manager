# 🏠 Remote Work Manager (스마트 원격 근무 관리 시스템)

> **Flask 웹 서버와 IoT(Raspberry Pi), 그리고 Windows MFC 클라이언트를 연동한 종합 원격 근무 관리 솔루션**

이 프로젝트는 재택근무 환경에서의 업무 효율성을 높이고 관리를 자동화하기 위해 개발되었습니다. 웹 대시보드를 통해 근무 시간을 기록하고, AI(YOLO) 기반의 졸음/이석 감지 기능을 제공하며, 라즈베리파이와 연동하여 실시간 상태(근무 중, 휴식, 목표 달성)를 LED로 시각화합니다.

---

## ✨ 주요 기능 (Key Features)

### 1️⃣ 근무 관리 및 모니터링 (Work Management)
* **출퇴근 기록**: 웹 대시보드 또는 MFC 클라이언트를 통해 출근/퇴근을 기록하며, 일일 근무 시간 및 초과 근무 시간을 자동으로 계산합니다.
* **AI 기반 감지**: 웹캠을 통해 사용자의 상태를 실시간으로 분석하여 졸음이 감지되거나 자리를 비울(이석) 경우, 관리자에게 즉시 알림을 전송합니다.
* **관리자 대시보드**: 관리자는 직원들의 실시간 접속 상태, 근무 로그, 그리고 AI 분석 화면을 실시간으로 모니터링할 수 있습니다.

### 2️⃣ IoT 하드웨어 연동 (IoT Integration)
* **스마트 조명 제어 (LED)**: 근무 상태에 따라 라즈베리파이의 LED를 제어합니다.
    * **🟢 목표 달성**: 기준 근무 시간 충족 시 초록불 점등
    * **🔴 업무 종료**: 퇴근 시 조명 Off
    * **🟡 상태 표시**: 자리 비움, 업무 복귀 등 상태에 따른 조명 변화
* **원격 카메라 제어**: 웹 인터페이스의 조이스틱 기능을 통해 원격지에 있는 카메라(서보모터)의 각도를 조절할 수 있습니다.

### 3️⃣ 보안 및 시스템 (Security & System)
* **계정 및 권한 관리**: 관리자와 일반 사원을 구분하여 접근 권한을 제어하며, JWT(JSON Web Token)를 사용하여 MFC 클라이언트와의 안전한 인증을 지원합니다.
* **SSL 보안 서버**: `gevent`와 `ssl` 라이브러리를 활용하여 HTTPS 환경에서 안전하게 웹캠 및 개인정보를 전송합니다.

---

## 🛠️ 사용 기술 스택 (Tech Stack)

| 분류 | 기술 | 설명 |
| :--- | :--- | :--- |
| **Server (Backend)** | **Python (Flask)** | Socket.IO를 이용한 실시간 양방향 통신 및 REST API 구현 |
| **Database** | **MySQL** | 사용자 정보, 근무 로그, 사원 데이터 저장 |
| **Frontend** | **HTML/CSS/JS** | 반응형 웹 대시보드 및 조이스틱 UI 구현 |
| **Client App** | **C++ (MFC)** | Windows 환경의 사용자 클라이언트 어플리케이션 |
| **IoT & AI** | **Raspberry Pi** | TCP 소켓 통신을 이용한 LED 제어 및 YOLO 객체 인식 서버 연동 |

---

## 📂 소스 코드 구조 (Directory Structure)

프로젝트는 크게 웹 서버(Flask)와 윈도우 클라이언트(MFC)로 구성되어 있습니다.

### 🌐 Flask_Code (Web Server)
* **`app.py`**: 메인 서버 파일입니다. DB 연결, 라우팅, 소켓 통신, IoT 기기 제어 로직이 포함되어 있습니다.
* **`templates/`**: 로그인, 회원가입, 관리자/사원 페이지 등 웹 UI 화면 파일들입니다.
* **`static/`**: CSS, JS 파일 및 설치 파일(`TheMoonSetup.msi`)이 포함됩니다.

### 🖥️ MFC_Code (Windows Client)
* **`TheMoonDlg.cpp`**: 윈도우 클라이언트의 메인 다이얼로그 로직입니다.
* **`HomeDlg.cpp`**: 사용자 홈 화면 및 기능 구현부입니다.
* **`MessengerDlg.cpp`**: 업무용 메신저 기능 구현부입니다.

---

## ⚠️ 설정 및 주의사항 (Configuration)

### 1. 🔌 하드웨어 IP 설정
`app.py` 파일 상단에 정의된 라즈베리파이 및 외부 서버의 IP 주소를 본인의 환경에 맞게 수정해야 합니다.
```python
RPI_DETECT_URL = "http://[YOLO_SERVER_IP]:18080/detect"
RPI_LED_SERVER_HOST = '[LED_SERVER_IP]' # 예: 192.168.0.94
